{"ast":null,"code":"/** PURE_IMPORTS_START _util_canReportError,_util_toSubscriber,_symbol_observable,_util_pipe,_config PURE_IMPORTS_END */\nimport { canReportError } from './util/canReportError';\nimport { toSubscriber } from './util/toSubscriber';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\n\nvar Observable = /*@__PURE__*/function () {\n  function Observable(subscribe) {\n    this._isScalar = false;\n\n    if (subscribe) {\n      this._subscribe = subscribe;\n    }\n  }\n\n  Observable.prototype.lift = function (operator) {\n    var observable = new Observable();\n    observable.source = this;\n    observable.operator = operator;\n    return observable;\n  };\n\n  Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n    var operator = this.operator;\n    var sink = toSubscriber(observerOrNext, error, complete);\n\n    if (operator) {\n      sink.add(operator.call(sink, this.source));\n    } else {\n      sink.add(this.source || config.useDeprecatedSynchronousErrorHandling && !sink.syncErrorThrowable ? this._subscribe(sink) : this._trySubscribe(sink));\n    }\n\n    if (config.useDeprecatedSynchronousErrorHandling) {\n      if (sink.syncErrorThrowable) {\n        sink.syncErrorThrowable = false;\n\n        if (sink.syncErrorThrown) {\n          throw sink.syncErrorValue;\n        }\n      }\n    }\n\n    return sink;\n  };\n\n  Observable.prototype._trySubscribe = function (sink) {\n    try {\n      return this._subscribe(sink);\n    } catch (err) {\n      if (config.useDeprecatedSynchronousErrorHandling) {\n        sink.syncErrorThrown = true;\n        sink.syncErrorValue = err;\n      }\n\n      if (canReportError(sink)) {\n        sink.error(err);\n      } else {\n        console.warn(err);\n      }\n    }\n  };\n\n  Observable.prototype.forEach = function (next, promiseCtor) {\n    var _this = this;\n\n    promiseCtor = getPromiseCtor(promiseCtor);\n    return new promiseCtor(function (resolve, reject) {\n      var subscription;\n      subscription = _this.subscribe(function (value) {\n        try {\n          next(value);\n        } catch (err) {\n          reject(err);\n\n          if (subscription) {\n            subscription.unsubscribe();\n          }\n        }\n      }, reject, resolve);\n    });\n  };\n\n  Observable.prototype._subscribe = function (subscriber) {\n    var source = this.source;\n    return source && source.subscribe(subscriber);\n  };\n\n  Observable.prototype[Symbol_observable] = function () {\n    return this;\n  };\n\n  Observable.prototype.pipe = function () {\n    var operations = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      operations[_i] = arguments[_i];\n    }\n\n    if (operations.length === 0) {\n      return this;\n    }\n\n    return pipeFromArray(operations)(this);\n  };\n\n  Observable.prototype.toPromise = function (promiseCtor) {\n    var _this = this;\n\n    promiseCtor = getPromiseCtor(promiseCtor);\n    return new promiseCtor(function (resolve, reject) {\n      var value;\n\n      _this.subscribe(function (x) {\n        return value = x;\n      }, function (err) {\n        return reject(err);\n      }, function () {\n        return resolve(value);\n      });\n    });\n  };\n\n  Observable.create = function (subscribe) {\n    return new Observable(subscribe);\n  };\n\n  return Observable;\n}();\n\nexport { Observable };\n\nfunction getPromiseCtor(promiseCtor) {\n  if (!promiseCtor) {\n    promiseCtor = config.Promise || Promise;\n  }\n\n  if (!promiseCtor) {\n    throw new Error('no Promise impl found');\n  }\n\n  return promiseCtor;\n}","map":{"version":3,"mappings":"AAIA;AACA,SAASA,cAAT,QAA6B,uBAA7B;AAGA,SAASC,YAAT,QAAuB,qBAAvB;AACA,SAASC,cAAaC,iBAAtB,QAA4C,qBAA5C;AACA,SAASC,aAAT,QAAuB,aAAvB;AAQA;;IAkBEC,0BAAY,YAA6E;WAflFA,WAASC,WAAkB;AAgBhC,SAAIC,SAAJ,GAAe,KAAf;;QACED,WAAK;AACN;AACF;AAyBD;;YACQ,WAAaE,OAAI,UAAgBC,QAAhB,EAAgB;AACvC,kBAAW,GAAM,IAAGJ,UAAH,EAAjB;AACAH,cAAU,CAACQ,MAAX,GAAmB,IAAnB;AACAR,cAAO,SAAP,GAAkBO,QAAlB;AACD;AAuID;;YAIU,uBAAkB;AAC1B,QAAMA,QAAO,gBAAb;AAEA,QAAIE,mBAAU,iCAAd;;QACEF,UAAS;AACVE;WACC;UAEE,KAAK,eAAgBC,MAAE,sCAAF,IAAE,wBAAlB,GACL,KAAKC,UAAL,CAAKF,IAAL,CADK,GAGR;AAED;;QACEC,MAAI,wCAAyB;UAC3BD,IAAI,CAACG,oBAAkB;AACvBH,YAAI,mBAAJ,GAA0B,KAA1B;;YACEA,sBAAW;AACZ;AACF;AACF;AAED;;AACD;AAGD;;YACM;QACF;AACD;AAAC,aACAI,KAAI;UACFH,MAAK,wCAAuB;AAC5BD,YAAI,CAACK,eAAL,GAAsB,IAAtB;AACDL;AACD;;UACEX,cAAc,CAACW,IAAD,GAAE;AACjBA;aACC;AACDM;AACF;AACF;AASD;;YAAA,WAkBCC;AAjBC,gBAAW,IAAX;;AAEAC,eAAW,iBAAkB,aAA7B;WAGE,IAAIA,WAAJ,CAA+B;AAC/B;kBACM;YACF;AACDC;AAAC,iBACAL,KAAO;AACPM,gBAAI,KAAJ;;cACEC,cAAa;AACdA;AACF;AACA;AACe,OATZ,EASYD,MATZ,EASYE,OATZ;AAUT,KAZG;AAeJ;;YACU,wBAAgB;AACxB,cAAO,GAAM,KAAIb,MAAjB;AACD;AAoBD;;YACE,CAAOc,UAAKrB;AACb;AAoCD;;YAAK,kBAA2C;kBAA3C;;SAAA,mCAA2CsB;;AAC9C;;QACEC,UAAO,CAAWC,MAAlB,KAAmB;AACpB;AAED;;AACD;AAQD;;YAAA,WAOCC;AANC,gBAAW,IAAX;;AAEAT,eAAW,iBAAY,aAAvB;WACE,IAAIA,WAAJ,CAAe;AACf;;AACeU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAClB,KAHG;AAhTG;;YACL,CAAOC,SAAI,UAAcxB,SAAd,EAAyB;AACrC;AAkTH;;AAxVA,SAwVCD,UAxVD;CAkBc;;AA+Ud,SAASA,UAAT;;SACO0B,eAAaZ;MAChB,cAAc;AACfA;AAED;;MACE,cAAU;AACX;AAED;;AACD","names":["canReportError","toSubscriber","observable","Symbol_observable","pipeFromArray","Observable","subscribe","_isScalar","lift","operator","source","sink","config","_subscribe","syncErrorThrowable","err","syncErrorThrown","console","forEach","promiseCtor","next","reject","subscription","resolve","prototype","_i","operations","length","toPromise","_this","create","getPromiseCtor"],"sources":["../../src/internal/Observable.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}